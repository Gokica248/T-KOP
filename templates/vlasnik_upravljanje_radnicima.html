<!DOCTYPE html>

<html lang="hr">



<head>

<meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Upravljanje radnicima</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

<style>

/* Osnovni stilovi za tijelo i pozadinu */

body {

margin: 0;

height: 100vh;

display: flex;

flex-direction: column;

justify-content: flex-start;

align-items: center;

font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

overflow-y: auto;

overflow-x: hidden;

background-color: #000000;

color: #e0e0e0;

position: relative;

}



/* Stilovi za pozadinsku animaciju zvijezdica */

.stars-background {

position: fixed;

width: 100%;

height: 100%;

top: 0;

left: 0;

overflow: hidden;

background: none;

z-index: -1;

}



.star {

position: absolute;

background-color: #FFD700;

border-radius: 50%;

opacity: 0.5;

animation: twinkle 4s infinite ease-in-out alternate;

}



/* Animacija treptanja zvijezdica */

@keyframes twinkle {

0% {

opacity: 0.5;

transform: scale(1);

}



50% {

opacity: 1;

transform: scale(1.2);

}



100% {

opacity: 0.5;

transform: scale(1);

}

}



/* Stilovi za glavni kontejner sadržaja */

.container {

background: rgba(30, 30, 30, 0.85);

backdrop-filter: blur(12px);

border-radius: 15px;

padding: 40px;

margin-top: 40px;

margin-bottom: 40px;

box-shadow:

0 0 25px rgba(255, 215, 0, 0.6),

0 0 50px rgba(255, 215, 0, 0.4),

0 0 75px rgba(255, 215, 0, 0.2),

0 8px 30px rgba(0, 0, 0, 0.7);

max-width: 800px;

/* Malo širi kontejner za tablicu */

width: 95%;

position: relative;

border: 1px solid rgba(255, 255, 255, 0.15);

z-index: 1;

}



h1,

h2 {

color: #FFD700;

font-weight: 700;

text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);

margin-bottom: 25px;

letter-spacing: 1px;

font-size: 2.5em;

}



h2 {

font-size: 1.8em;

margin-top: 35px;

margin-bottom: 20px;

}



.form-label {

color: #FFD700;

margin-bottom: 10px;

font-weight: 600;

}



.form-control {

background-color: rgba(50, 50, 50, 0.7);

border: 1px solid rgba(255, 255, 255, 0.3);

color: #ffffff;

padding: 12px 16px;

border-radius: 8px;

font-size: 1.05em;

transition: all 0.3s ease;

}



.form-control::placeholder {

color: rgba(255, 255, 255, 0.6);

}



.form-control:focus {

background-color: rgba(60, 60, 60, 0.9);

border-color: #FFD700;

box-shadow: 0 0 0 0.25rem rgba(255, 215, 0, 0.35);

color: #ffffff;

}



.btn-success {

background-color: #28a745;

border-color: #28a745;

padding: 12px 20px;

font-size: 1.1em;

font-weight: bold;

border-radius: 8px;

transition: all 0.3s ease;

letter-spacing: 0.5px;

}



.btn-success:hover {

background-color: #218838;

border-color: #1e7e34;

transform: translateY(-2px);

box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);

}



.btn-primary {

background-color: #FFD700;

border-color: #FFD700;

padding: 8px 15px;

font-size: 0.9em;

font-weight: bold;

border-radius: 6px;

transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;

color: #1a1a2e;

}



.btn-primary:hover {

background-color: #E6B800;

border-color: #E6B800;

transform: translateY(-1px);

box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

}



.btn-danger {

background-color: #dc3545;

border-color: #dc3545;

padding: 8px 15px;

font-size: 0.9em;

font-weight: bold;

border-radius: 6px;

transition: all 0.3s ease;

}



.btn-danger:hover {

background-color: #c82333;

border-color: #bd2130;

transform: translateY(-1px);

box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

}



.btn-secondary {

background-color: #6c757d;

border-color: #6c757d;

color: white;

font-weight: bold;

border-radius: 8px;

transition: all 0.3s ease;

}



.btn-secondary:hover {

background-color: #5a6268;

border-color: #545b62;

transform: translateY(-2px);

box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);

}



.table {

background-color: rgba(50, 50, 50, 0.7);

border-radius: 10px;

overflow: hidden;

/* Zaobljeni rubovi na cijeloj tablici */

}



.table thead th {

background-color: rgba(255, 215, 0, 0.2);

color: #FFD700;

border-bottom: 1px solid rgba(255, 215, 0, 0.5);

font-weight: bold;

padding: 15px;

vertical-align: middle;

}



.table tbody tr {

border-bottom: 1px solid rgba(255, 255, 255, 0.1);

}



.table tbody tr:last-child {

border-bottom: none;

}



.table tbody td {

color: #cccccc;

padding: 15px;

vertical-align: middle;

}



.table tbody td form {

margin-bottom: 0;

/* Ukloni default marginu forme */

}



.form-control-sm {

padding: 0.375rem 0.75rem;

font-size: 0.875rem;

border-radius: 0.25rem;

}



.w-auto {

width: auto !important;

}



.d-inline {

display: inline-block !important;

}



/* Stilovi za poruke upozorenja (Flash Messages) */

.alert {

border-radius: 8px;

font-weight: bold;

text-align: center;

margin-top: 25px;

background-color: rgba(255, 215, 0, 0.2);

color: #FFD700;

border: 1px solid #FFD700;

display: none;

/* Skrivamo po defaultu, JS će prikazati ako nije animacija */

}



.alert-danger {

background-color: rgba(220, 53, 69, 0.8);

color: white;

border: none;

display: block;

}



/* --- Stilovi za pop-up animaciju (Uspjeh) --- */

.success-overlay {

position: fixed;

top: 0;

left: 0;

width: 100%;

height: 100%;

background-color: rgba(0, 0, 0, 0.8);

display: flex;

align-items: center;

justify-content: center;

z-index: 9999;

opacity: 0;

pointer-events: none;

transition: opacity 0.5s ease-in;

}



.success-overlay.show {

opacity: 1;

pointer-events: all;

}



.success-overlay.hide {

opacity: 0;

transition: opacity 1s ease-out;

pointer-events: none;

}



.success-checkmark-circle {

width: 120px;

height: 120px;

border-radius: 50%;

background-color: #28a745;

display: flex;

align-items: center;

justify-content: center;

animation: scaleUp 0.5s ease forwards;

box-shadow: 0 0 30px rgba(40, 167, 69, 0.8);

}



.success-checkmark-circle i {

color: white;

font-size: 60px;

font-weight: bold;

}



@keyframes scaleUp {

0% {

transform: scale(0);

}



100% {

transform: scale(1);

}

}

</style>

</head>



<body>

<div class="stars-background" id="stars-container"></div>



<div class="container">

<h1>Upravljanje radnicima</h1>



<h2>Dodaj novog radnika</h2>

<form method="post" action="{{ url_for('vlasnik_upravljanje_radnicima') }}" class="mb-4">

<input type="hidden" name="dodaj" value="1" />

<div class="mb-3">

<label for="novo_korime" class="form-label">Korisničko ime</label>

<input type="text" id="novo_korime" name="novo_korime" class="form-control" required />

</div>

<div class="mb-3">

<label for="nova_lozinka" class="form-label">Lozinka</label>

<input type="password" id="nova_lozinka" name="nova_lozinka" class="form-control" required />

</div>

<button type="submit" class="btn btn-success">Dodaj radnika</button>

</form>



<h2>Postojeći radnici</h2>

<table class="table table-bordered">

<thead>

<tr>

<th>Korisničko ime</th>

<th>Akcije</th>

</tr>

</thead>

<tbody>

{% for radnik in radnici %}

<tr>

<td>{{ radnik.korime }}</td>

<td>

<form method="post" style="display:inline;"

action="{{ url_for('vlasnik_upravljanje_radnicima') }}">

<input type="hidden" name="obrisi" value="1" />

<input type="hidden" name="korime_za_brisanje" value="{{ radnik.korime }}" />

<button type="submit" class="btn btn-danger btn-sm"

onclick="return confirm('Jeste li sigurni da želite obrisati radnika {{ radnik.korime }}?');">Obriši</button>

</form>



<form method="post" style="display:inline;"

action="{{ url_for('vlasnik_upravljanje_radnicima') }}" class="d-inline ms-2">

<input type="hidden" name="uredi" value="1" />

<input type="hidden" name="stari_korime" value="{{ radnik.korime }}" />

<input type="text" name="novi_korime" value="{{ radnik.korime }}" required

class="form-control form-control-sm d-inline w-auto" />

<input type="password" name="nova_lozinka" placeholder="Nova lozinka (ostavi prazno za staru)"

class="form-control form-control-sm d-inline w-auto ms-1" />

<button type="submit" class="btn btn-primary btn-sm ms-1">Uredi</button>

</form>

</td>

</tr>

{% else %}

<tr>

<td colspan="2" class="text-center text-muted">Nema radnika za prikaz.</td>

</tr>

{% endfor %}

</tbody>

</table>



<a href="{{ url_for('vlasnik_dashboard') }}" class="btn btn-secondary mt-3">Natrag</a>



<input type="hidden" id="actionSuccess" value="false">

<input type="hidden" id="flashMessageText" value="{{ get_flashed_messages()[0] if get_flashed_messages() else '' }}">





{% with messages = get_flashed_messages() %}

{% if messages %}

{% if messages[0] not in ['Radnik uspješno dodan.', 'Radnik uspješno obrisan.', 'Radnik uspješno uređen.'] %}

<div id="flashMessageDisplay" class="alert alert-info mt-3">

{{ messages[0] }}

</div>

{% endif %}

{% endif %}

{% endwith %}

</div>



<div id="successOverlay" class="success-overlay">

<div class="success-checkmark-circle">

<i class="bi bi-check"></i>

</div>

</div>



<script>

// Skripta za generiranje i animaciju zvijezdica

document.addEventListener('DOMContentLoaded', () => {

const starsContainer = document.getElementById('stars-container');

const numberOfStars = 100;



for (let i = 0; i < numberOfStars; i++) {

const star = document.createElement('div');

star.classList.add('star');



star.style.left = `${Math.random() * 100}%`;

star.style.top = `${Math.random() * 100}%`;



const size = Math.random() * 3 + 1;

star.style.width = `${size}px`;

star.style.height = `${size}px`;



star.style.animationDelay = `${Math.random() * 4}s`;

star.style.animationDuration = `${Math.random() * 3 + 2}s`;



starsContainer.appendChild(star);

}



// Funkcija za prikaz uspješne animacije

function showSuccessAnimation() {

const overlay = document.getElementById('successOverlay');

overlay.classList.add('show'); // Prikaži overlay



// Drži se vidljivim 3.5 sekunde, zatim započni skrivanje tijekom 1 sekunde

setTimeout(() => {

overlay.classList.add('hide'); // Započni skrivanje

setTimeout(() => {

overlay.classList.remove('show', 'hide'); // Potpuno ukloni klase nakon tranzicije

}, 1000); // Trajanje tranzicije hide klase (1 sekunda)

}, 3500); // Ukupno vrijeme prikaza prije početka skrivanja (3.5 sekundi)

}



// Provjeri Flask flash poruku za aktivaciju animacije

const flashMessageText = document.getElementById('flashMessageText').value;

const successMessages = [

'Radnik uspješno dodan.',

'Radnik uspješno obrisan.',

'Radnik uspješno uređen.'

];



if (successMessages.includes(flashMessageText)) {

showSuccessAnimation();

// Postavite flag da je akcija uspješna (ako vam zatreba za nešto drugo)

document.getElementById('actionSuccess').value = 'true';

} else {

// Ako postoji neka druga flash poruka, prikaži je (npr. pogreška)

const flashMessageDisplay = document.getElementById('flashMessageDisplay');

if (flashMessageDisplay) {

flashMessageDisplay.style.display = 'block';

}

}

});

</script>

</body>



</html>